module testTable


import ../strings


fn testTableDelete()
    data table [i64] 
    for [0..4] -> i; table.push(i)

    let [0, 1, 2, 3] = table
    table.delete(3)
    let [0, 1, 2] = table
    table.delete(1)
    let [0, 2] = table
    table.delete(0)
    let [2] = table
    table.delete(0)
    let [] = table


fn testTablePush()
    data table [string]
    let [] = table 
    table.push()
    let [""] = table 
    {table[0], "asdf"}.write()
    table.push()
    let ["asdf", ""] = table
    table.delete(0)
    let [""] = table


fn testTableTwoRows()
    data table [i64; bool]
    let 0 = table.push()
    let 1 = table.push(1, true)
    let [0, 1; false, true] = table


fn testTableEqEq()
    data table0 [bool; i64]
    data table1 [bool; i64]
    let true = table0 == table1
    table0.push(true, 2)
    let false = table0 == table1
    table1.push(true, 2)
    let true = table0 == table1
    table0.push(false, 3)
    table1.push(false, 4)
    let false = table0 == table1
    table0.pop()
    table0.push(false, 4)
    let true = table0 == table1


fn testTable()
    testTableDelete()
    testTablePush()
    testTableTwoRows()
    testTableEqEq()
    print("testTable passed")
