module table


fn[T] {t table[T]} length() i64
    ${ return $t->len; }


fn[T] {t table[T]} push(elem ()T)
    t++
    t{t.length() - 1} = elem{}


fn[T] {t table[T]} pop() ()T
    data elem ()T
    elem{} = t{t.length() - 1}
    ${ $t->len--; }
    return elem


fn[T] {t table[T]} at(index i64) {}T
    assert(index >= 0 && index < len(t), "index out of range")
    return t{index}
